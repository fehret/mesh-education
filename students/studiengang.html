<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Beispiel-Design Nr. 03 von SelfHTML.org" />
    <link rel="stylesheet" href="students.css">
    <title>SelfHTML Design 03</title>

    <script>
        function load_data() {
            fetch("data.json")
                .then(response => response.json())
                .then(json => setFach(json));
        }

        function getKeyByValue(object, value) {
            return Object.keys(object).find(key => object[key].includes(value.toLowerCase()) )
        }

        function setFach(json) {
            //let fach_arr = ["Informatik", "Maschinenbau", "Elektrotechnik", "Wirtschaftsinformatik"]
            //let embeds = ["nMsL_BaaAEc", "v5Mvk_73Pg4", "Y-ARvx8m9v8", "GsHkS2qT690"]

            console.log(json);

            let params = new URLSearchParams(location.search);
            let fach = getKeyByValue(json["fach"],params.get('study'));
            let locat = params.get('location').toLowerCase();
            json = json[locat];
            if (Object.keys(json).includes(fach)){

                //let fach_idx = fach_arr.indexOf(fach);
                let text = document.getElementById("welcome");
                let video = document.getElementById("video");
                let desc = document.getElementById("description");
                let logo = document.getElementById("logo_image");

                let frame = document.createElement("iframe");

                let link = "https://www.youtube.com/embed/"+json[fach].video //embeds[fach_idx]
                let video_html = "<iframe referrerpolicy='strict-origin' width=\"560\" height=\"315\" src=\""+link+"\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>"
                frame.setAttribute("src", link);
                frame.width = "560px";
                frame.height = "315px";
                frame.setAttribute("title", "Einführungsvideo");
                frame.setAttribute("allow", "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture");

                console.log(link)
                console.log(video_html)
                video.appendChild(frame);
                text.innerHTML = "Willkommen <span>bei "+ fach + " an der " + json["text"] + "</span>";
                desc.appendChild(document.createTextNode(json[fach].text))

                console.log(json["logo"])
                logo.setAttribute("src", "./logo/" + json["logo"])

                //video.innerHTML = video_html
                //video.hidden = false
            }else{
                console.log(fach)
                //window.location.replace("students.php");
            }


        }
    </script>
</head>
<body onload="load_data()">

<header>
    <a class="ribbon" tabindex="-1" title="zurück zur Startseite!" href="students.php">
        <h1 id="logo">SelfHTML Design 03</h1>
        <p>Deine Suche für Hochschulen</p>
    </a>
    
</header>

<main>

    <nav id="navigation">
        <ul>
            <li><a aria-current="page">Home</a></li>
            <li><a href="1-unterseite.html">Über uns</a></li>
            <li><a href="1-unterseite.html#">Leistungen</a></li>
            <li><a href="1-unterseite.html">Referenzobjekte</a>
            <li><a href="1-unterseite.html">Anfahrt</a></li>
            <li><a href="2-contact.html">Kontakt</a></li>
        </ul>
    </nav>

    <section id="intro">
        <h2 id="welcome"></h2>
        <p>

        </p>
    </section>


    <section class="spalte">
        <h2>Was dich erwartet</h2>
        <p>
            <img id="logo_image" src="" alt="Dummybild - bitte Alternativbeschreibung einfügen">
            <div id="description"></div>
            <a class="more" href="1-unterseite.html">weiter lesen</a>
    </section>


    <section class="spalte">
        <h2>Lorem ipsum</h2>
        <p>
            Lorem ipsum dolor sit amet consectetiu eradipiscing elit sed diam.
        </p>
        <ul class="square">
            <li><a href="#">Lorem ipsum</a></li>
            <li><a href="#">Lorem ipsum dolor</a></li>
            <li><a href="#">Lorem ipsmum dolor sit</a></li>
            <li><a href="#">Lorem ipsum dolor sit amet</a></li>
        </ul>
        <a class="more" href="1-unterseite.html">weiter lesen</a>
    </section>
    <div id="video"></div>


</main>

<footer class="grid">
    <ul id="footer-nav">
        <li><a href="2-contact.html" title="Kontakt"><img src="img/info.svg" alt="info"></a></li>
        <li><a href="#" title="Sitemap"><img src="img/sitemap.svg" alt="info"></a></li>
        <li><a href="2-contact.html" title="impressum"><img src="img/print.svg" alt="print"></a></li>
    </ul>
    <p>
        Design: Duit, <a href="http://designenlassen.de/">designenlassen.de</a><br>
        technische Umsetzung: <a href="http://selfhtml.org">selfhtml.org</a>
    </p>
</footer>

</body>
</html>